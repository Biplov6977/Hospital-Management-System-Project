{% extends "base.html" %}
{% block content %}
  <h2>Edit Your Profile</h2>
  <p>Update your personal information. Your email cannot be changed.</p>

  <form method="post" action="{{ url_for('edit_profile_submit') }}">
    <div>
      <label for="email">Email (Cannot be changed)</label><br>
      <input id="email" name="email" type="email" value="{{ current_user.email }}" disabled>
    </div>

    <div>
      <label for="name">Full name</label><br>
      <input id="name" name="name" type="text" value="{{ current_user.name or '' }}" required maxlength="150">
    </div>

    <div>
      <label for="age">Age (optional)</label><br>
      <input id="age" name="age" type="number" value="{{ current_user.age or '' }}" min="0" step="1">
    </div>

    <div>
      <label for="gender">Gender (optional)</label><br>
      <select id="gender" name="gender">
        <option value="">Select</option>
        <option value="male" {% if current_user.gender == 'male' %}selected{% endif %}>Male</option>
        <option value="female" {% if current_user.gender == 'female' %}selected{% endif %}>Female</option>
        <option value="other" {% if current_user.gender == 'other' %}selected{% endif %}>Other</option>
      </select>
    </div>

    <div>
      <label for="contact_number">Contact number (optional)</label><br>
      <input id="contact_number" name="contact_number" type="tel" value="{{ current_user.contact_number or '' }}" pattern="^\+?[0-9]{7,15}$" placeholder="+919xxxxxxxxx">
    </div>

    <div>
      <label for="address">Address (optional)</label><br>
      <textarea id="address" name="address" rows="2">{{ current_user.address or '' }}</textarea>
    </div>

    <div style="margin-top:20px;">
      <button type="submit">Update Profile</button>
    </div>
  </form>

  <p style="margin-top: 20px;">
    <a href="{{ url_for('patient_dashboard') }}">Cancel and go back</a>
  </p>
  
{% endblock %}